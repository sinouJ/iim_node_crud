{"remainingRequest":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/babel-loader/lib/index.js!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/src/molecules/SignupForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/src/molecules/SignupForm.vue","mtime":1618942067000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9odGRvY3MvaWltL25vZGVqcy90b2RvX2FwcC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZGF0ZS50by1zdHJpbmcuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgdXNlcnMgZnJvbSAnLi4vYXBpL3VzZXJzJzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUvaW5kZXgnOwppbXBvcnQgand0IGZyb20gJ2pzb253ZWJ0b2tlbic7CmltcG9ydCBDb29raWVzIGZyb20gImpzLWNvb2tpZSI7CmltcG9ydCBkYXlqcyBmcm9tICJkYXlqcyI7CmltcG9ydCB1dGMgZnJvbSAnZGF5anMvcGx1Z2luL3V0Yyc7CmRheWpzLmV4dGVuZCh1dGMpOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NpZ251cEZvcm0nLAogIHByb3BzOiB7CiAgICBlbWFpbDogU3RyaW5nLAogICAgcGFzc3dvcmQ6IFN0cmluZywKICAgIHVzZXJuYW1lOiBTdHJpbmcKICB9LAogIHN0b3JlOiBzdG9yZSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbXV0YWJsZUVtYWlsOiB0aGlzLmVtYWlsLAogICAgICBtdXRhYmxlUGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQsCiAgICAgIG11dGFibGVVc2VybmFtZTogdGhpcy51c2VybmFtZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG1ha2VUb2FzdDogZnVuY3Rpb24gbWFrZVRvYXN0KG1lc3NhZ2UpIHsKICAgICAgdGhpcy4kYnZUb2FzdC50b2FzdChtZXNzYWdlLCB7CiAgICAgICAgdGl0bGU6ICdFcnJvciBkdXJpbmcgc2lnbnVwJywKICAgICAgICBhdXRvSGlkZURlbGF5OiA4MDAwLAogICAgICAgIHZhcmlhbnQ6ICdkYW5nZXInLAogICAgICAgIHNvbGlkOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIGxvZ2luOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfbG9naW4gPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlcVJlZ2lzdGVyLCByZXFMb2dpbiwgdmVyaWZpZWRUb2tlbiwgZXhwVG9rZW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gdXNlcnMuc2lnbnVwVXNlcih7CiAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLm11dGFibGVFbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMubXV0YWJsZVBhc3N3b3JkLAogICAgICAgICAgICAgICAgICB1c2VybmFtZTogdGhpcy5tdXRhYmxlVXNlcm5hbWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICByZXFSZWdpc3RlciA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKCFyZXFSZWdpc3Rlci5Vc2VySWQpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIHJldHVybiB1c2Vycy5sb2dpblVzZXIoewogICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5tdXRhYmxlRW1haWwsCiAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLm11dGFibGVQYXNzd29yZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIHJlcUxvZ2luID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgICAgcmV0dXJuIGp3dC52ZXJpZnkocmVxTG9naW4udG9rZW4sICdzZWNyZXQnKTsKCiAgICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgICAgdmVyaWZpZWRUb2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gZGF5anMudW5peCh2ZXJpZmllZFRva2VuLmV4cCkuZm9ybWF0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBleHBUb2tlbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICByZXR1cm4gQ29va2llcy5zZXQoJ3Rva2VuJywgcmVxTG9naW4udG9rZW4sIHsKICAgICAgICAgICAgICAgICAgZXhwaXJlczogbmV3IERhdGUoZXhwVG9rZW4pCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndXNlcnMvU1RPUkVfVE9LRU4nLCByZXFMb2dpbi50b2tlbik7CgogICAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgICBpZiAocmVxTG9naW4uc3RhdHVzID09PSAyMDApIHsKICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmIChyZXFSZWdpc3Rlci50eXBlID09PSAncGFzc3dvcmQnKSB7CiAgICAgICAgICAgICAgICAgIHRoaXMubWFrZVRvYXN0KCdwYXNzd29yZCBtdXN0IGNvbnRhaW4gYmV0d2VlbiA2IGFuZCAyMCBjaGFyYWN0ZXJzIGFuZCBhdCBsZWFzdCBvbmUgbnVtZXJpYyBkaWdpdCwgb25lIHVwcGVyY2FzZSBhbmQgb25lIGxvd2VyY2FzZSBsZXR0ZXInKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxUmVnaXN0ZXIudHlwZSA9PT0gJ2VtYWlsJykgewogICAgICAgICAgICAgICAgICB0aGlzLm1ha2VUb2FzdCgnaW52YWxpZCBlbWFpbCBmb3JtYXQnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAocmVxUmVnaXN0ZXIuc3RhdHVzID09PSA0MDkpIHsKICAgICAgICAgICAgICAgICAgdGhpcy5tYWtlVG9hc3QoJ3VzZXIgYWxyZWFkeSBleGlzdHMnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBsb2dpbigpIHsKICAgICAgICByZXR1cm4gX2xvZ2luLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBsb2dpbjsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["SignupForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA,OAAA,KAAA,MAAA,cAAA;AAEA,OAAA,KAAA,MAAA,eAAA;AACA,OAAA,GAAA,MAAA,cAAA;AACA,OAAA,OAAA,MAAA,WAAA;AAEA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,GAAA,MAAA,kBAAA;AAEA,KAAA,CAAA,MAAA,CAAA,GAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,KAAA,EAAA,MADA;AAEA,IAAA,QAAA,EAAA,MAFA;AAGA,IAAA,QAAA,EAAA;AAHA,GAFA;AAOA,EAAA,KAAA,EAAA,KAPA;AAQA,EAAA,IARA,kBAQA;AACA,WAAA;AACA,MAAA,YAAA,EAAA,KAAA,KADA;AAEA,MAAA,eAAA,EAAA,KAAA,QAFA;AAGA,MAAA,eAAA,EAAA,KAAA;AAHA,KAAA;AAKA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,SAAA,EAAA,mBAAA,OAAA,EAAA;AACA,WAAA,QAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA,QAAA,KAAA,EAAA,qBADA;AAEA,QAAA,aAAA,EAAA,IAFA;AAGA,QAAA,OAAA,EAAA,QAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAAA;AAMA,KARA;AASA,IAAA,KAAA;AAAA,2EAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,UAAA,CAAA;AACA,kBAAA,KAAA,EAAA,KAAA,YADA;AAEA,kBAAA,QAAA,EAAA,KAAA,eAFA;AAGA,kBAAA,QAAA,EAAA,KAAA;AAHA,iBAAA,CADA;;AAAA;AACA,gBAAA,WADA;;AAAA,qBAMA,WAAA,CAAA,MANA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAOA,KAAA,CAAA,SAAA,CAAA;AACA,kBAAA,KAAA,EAAA,KAAA,YADA;AAEA,kBAAA,QAAA,EAAA,KAAA;AAFA,iBAAA,CAPA;;AAAA;AAOA,gBAAA,QAPA;AAAA;AAAA,uBAWA,GAAA,CAAA,MAAA,CAAA,QAAA,CAAA,KAAA,EAAA,QAAA,CAXA;;AAAA;AAWA,gBAAA,aAXA;AAAA;AAAA,uBAYA,KAAA,CAAA,IAAA,CAAA,aAAA,CAAA,GAAA,EAAA,MAAA,EAZA;;AAAA;AAYA,gBAAA,QAZA;AAAA;AAAA,uBAaA,OAAA,CAAA,GAAA,CAAA,OAAA,EAAA,QAAA,CAAA,KAAA,EAAA;AAAA,kBAAA,OAAA,EAAA,IAAA,IAAA,CAAA,QAAA;AAAA,iBAAA,CAbA;;AAAA;AAAA;AAAA,uBAcA,KAAA,MAAA,CAAA,QAAA,CAAA,mBAAA,EAAA,QAAA,CAAA,KAAA,CAdA;;AAAA;AAeA,oBAAA,QAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,uBAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA;;AAjBA;AAmBA,oBAAA,WAAA,CAAA,IAAA,KAAA,UAAA,EAAA;AACA,uBAAA,SAAA,CAAA,0HAAA;AACA;;AACA,oBAAA,WAAA,CAAA,IAAA,KAAA,OAAA,EAAA;AACA,uBAAA,SAAA,CAAA,sBAAA;AACA;;AACA,oBAAA,WAAA,CAAA,MAAA,KAAA,GAAA,EAAA;AACA,uBAAA,SAAA,CAAA,qBAAA;AACA;;AA3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AATA;AAfA,CAAA","sourcesContent":["<template>\n  <b-form @submit.prevent=\"login\" class=\"col-8\">\n    <b-form-group\n        id=\"input-group-1\"\n        label=\"Email address:\"\n        label-for=\"input-1\"\n    >\n        <b-form-input\n            id=\"input-1\"\n            v-model=\"mutableEmail\"\n            type=\"text\"\n            placeholder=\"Enter email\"\n            required\n        ></b-form-input>\n    </b-form-group>\n    <b-form-group id=\"input-group-2\" label=\"Your Password:\" label-for=\"input-2\">\n        <b-form-input\n            id=\"input-2\"\n            v-model=\"mutablePassword\"\n            placeholder=\"Enter password\"\n            required\n        ></b-form-input>\n    </b-form-group>\n    <b-form-group id=\"input-group-2\" label=\"Username:\" label-for=\"input-2\">\n        <b-form-input\n            id=\"input-2\"\n            v-model=\"mutableUsername\"\n            placeholder=\"Enter username\"\n            required\n        ></b-form-input>\n    </b-form-group>\n    <b-button type=\"submit\" variant=\"success\">Signup</b-button>\n  </b-form>\n</template>\n\n<script>\nimport users from '../api/users'\n\nimport store from '@/store/index'\nimport jwt from 'jsonwebtoken'\nimport Cookies from \"js-cookie\";\n\nimport dayjs from \"dayjs\";\nimport utc from 'dayjs/plugin/utc'\n\ndayjs.extend(utc)\n\nexport default {\n    name: 'SignupForm',\n    props: {\n        email: String,\n        password: String,\n        username: String\n    },\n    store,\n    data() {\n        return {\n            mutableEmail: this.email,\n            mutablePassword: this.password,\n            mutableUsername: this.username\n        }\n    },\n    methods: {\n        makeToast: function(message) {\n            this.$bvToast.toast(message, {\n                title: 'Error during signup',\n                autoHideDelay: 8000,\n                variant: 'danger',\n                solid: true\n            })\n        },\n        login: async function() {\n            const reqRegister = await users.signupUser({\n                email: this.mutableEmail,\n                password: this.mutablePassword,\n                username: this.mutableUsername\n            })\n            if (reqRegister.UserId) {\n                const reqLogin = await users.loginUser({\n                    email: this.mutableEmail,\n                    password: this.mutablePassword\n                })\n                const verifiedToken = await jwt.verify(reqLogin.token, 'secret')\n                const expToken = await dayjs.unix(verifiedToken.exp).format()\n                await Cookies.set('token', reqLogin.token, {expires: new Date(expToken)})\n                await this.$store.dispatch('users/STORE_TOKEN', reqLogin.token)\n                if (reqLogin.status === 200) {\n                    this.$router.push('/')\n                }\n            }\n            if (reqRegister.type === 'password') {\n                this.makeToast('password must contain between 6 and 20 characters and at least one numeric digit, one uppercase and one lowercase letter')\n            }\n            if (reqRegister.type === 'email') {\n                this.makeToast('invalid email format')\n            }\n            if (reqRegister.status === 409) {\n                this.makeToast('user already exists')\n            }\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/molecules"}]}