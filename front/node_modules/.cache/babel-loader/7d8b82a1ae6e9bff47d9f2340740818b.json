{"remainingRequest":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/babel-loader/lib/index.js!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/src/views/Profile.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/src/views/Profile.vue","mtime":1618942441000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/iim/nodejs/todo_app/front/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9odGRvY3MvaWltL25vZGVqcy90b2RvX2FwcC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9odGRvY3MvaWltL25vZGVqcy90b2RvX2FwcC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB1c2VycyBmcm9tICcuLi9hcGkvdXNlcnMnOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwppbXBvcnQgUHJvZmlsZUZvcm0gZnJvbSAnLi4vbW9sZWN1bGVzL1Byb2ZpbGVGb3JtJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFByb2ZpbGVGb3JtOiBQcm9maWxlRm9ybQogIH0sCiAgbmFtZTogJ1Byb2ZpbGUnLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbWFpbDogJycsCiAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgYmlvOiAnJwogICAgfTsKICB9LAogIGFzeW5jQ29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycygndXNlcnMnLCB7CiAgICB0b2tlbjogJ3Rva2VuJwogIH0pKSwge30sIHsKICAgIHVzZXI6IGZ1bmN0aW9uIHVzZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB2ZXJpZmllZFRva2VuLCB1c2VyOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzLnRva2VuICYmIF90aGlzLnRva2VuLmlzTG9nZ2VkKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdmVyaWZpZWRUb2tlbiA9IGp3dC52ZXJpZnkoX3RoaXMudG9rZW4udG9rZW4sICdzZWNyZXQnKTsKCiAgICAgICAgICAgICAgICBpZiAoIXZlcmlmaWVkVG9rZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJzLmdldFVzZXIoX3RoaXMudG9rZW4udG9rZW4pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICB1c2VyID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHVzZXIpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY3JlYXRlZERhdGU6IGZ1bmN0aW9uIGNyZWF0ZWREYXRlKCkgewogICAgICBpZiAodGhpcy51c2VyKSB7CiAgICAgICAgcmV0dXJuIGRheWpzKHRoaXMudXNlci5jcmVhdGVkQXQpLmxvY2FsZSgnZnInKS5mb3JtYXQoJ0QgTU1NTSBZWVlZJyk7CiAgICAgIH0KICAgIH0KICB9KSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIGxvZ0Nvb2tpZSA9IENvb2tpZXMuZ2V0KCd0b2tlbicpOwoKICAgIGlmIChsb2dDb29raWUpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXJzL1NUT1JFX1RPS0VOJywgbG9nQ29va2llKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFjdGlvbk1vZGFsOiBmdW5jdGlvbiBhY3Rpb25Nb2RhbCgpIHsKICAgICAgdmFyIGFjdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJ2hpZGUnOwogICAgICAvLyBEaXNwbGF5IGRlZmF1bHRzIHVzZXIgaW5mb3JtYXRpb25zIGluIGZvcm0KICAgICAgdGhpcy51c2VybmFtZSA9IHRoaXMudXNlci51c2VybmFtZTsKICAgICAgdGhpcy5lbWFpbCA9IHRoaXMudXNlci5lbWFpbDsKICAgICAgdGhpcy5iaW8gPSB0aGlzLnVzZXIuYmlvOwogICAgICBpZiAoYWN0aW9uID09PSAnc2hvdycpIHRoaXMuJGJ2TW9kYWwuc2hvdygnbW9kYWwtZm9ybScpO2Vsc2UgdGhpcy4kYnZNb2RhbC5oaWRlKCdtb2RhbC1mb3JtJyk7CiAgICB9LAogICAgdXBkYXRlQWZ0ZXJTYXZlOiBmdW5jdGlvbiB1cGRhdGVBZnRlclNhdmUodXNlcikgewogICAgICAvLyBVcGRhdGUgZGF0YSBmb3IgcmUtcmVuZGVyCiAgICAgIHRoaXMuJGJ2TW9kYWwuaGlkZSgnbW9kYWwtZm9ybScpOwogICAgICB0aGlzLnVzZXIudXNlcm5hbWUgPSB1c2VyLnVzZXJuYW1lOwogICAgICB0aGlzLnVzZXIuZW1haWwgPSB1c2VyLmVtYWlsOwogICAgICB0aGlzLnVzZXIuYmlvID0gdXNlci5iaW87CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Profile.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,OAAA,OAAA,MAAA,WAAA;AACA,OAAA,GAAA,MAAA,cAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,KAAA,MAAA,cAAA;AACA,OAAA,KAAA,MAAA,OAAA;AACA,OAAA,WAAA,MAAA,0BAAA;AAGA,eAAA;AACA,EAAA,UAAA,EAAA;AAAA,IAAA,WAAA,EAAA;AAAA,GADA;AAEA,EAAA,IAAA,EAAA,SAFA;AAGA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,GAAA,EAAA;AAHA,KAAA;AAKA,GATA;AAUA,EAAA,aAAA,kCACA,UAAA,CAAA,OAAA,EAAA;AACA,IAAA,KAAA,EAAA;AADA,GAAA,CADA;AAIA,IAAA,IAJA,kBAIA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,KAAA,CAAA,KAAA,IAAA,KAAA,CAAA,KAAA,CAAA,QADA;AAAA;AAAA;AAAA;;AAEA,gBAAA,aAFA,GAEA,GAAA,CAAA,MAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA,EAAA,QAAA,CAFA;;AAAA,qBAGA,aAHA;AAAA;AAAA;AAAA;;AAAA;AAAA,uBAIA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,KAAA,CAAA,KAAA,CAJA;;AAAA;AAIA,gBAAA,IAJA;AAAA,iDAKA,IALA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAZA;AAaA,IAAA,WAAA,EAAA,uBAAA;AACA,UAAA,KAAA,IAAA,EAAA;AACA,eAAA,KAAA,CAAA,KAAA,IAAA,CAAA,SAAA,CAAA,CAAA,MAAA,CAAA,IAAA,EAAA,MAAA,CAAA,aAAA,CAAA;AACA;AACA;AAjBA,IAVA;AA6BA,EAAA,OA7BA,qBA6BA;AACA,QAAA,SAAA,GAAA,OAAA,CAAA,GAAA,CAAA,OAAA,CAAA;;AACA,QAAA,SAAA,EAAA;AACA,WAAA,MAAA,CAAA,QAAA,CAAA,mBAAA,EAAA,SAAA;AACA;AACA,GAlCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA,UAAA,MAAA,uEAAA,MAAA;AAAA;AACA,WAAA,QAAA,GAAA,KAAA,IAAA,CAAA,QAAA;AACA,WAAA,KAAA,GAAA,KAAA,IAAA,CAAA,KAAA;AACA,WAAA,GAAA,GAAA,KAAA,IAAA,CAAA,GAAA;AACA,UAAA,MAAA,KAAA,MAAA,EAAA,KAAA,QAAA,CAAA,IAAA,CAAA,YAAA,EAAA,KACA,KAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,KAPA;AAQA,IAAA,eAAA,EAAA,yBAAA,IAAA,EAAA;AAAA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,IAAA,CAAA,QAAA;AACA,WAAA,IAAA,CAAA,KAAA,GAAA,IAAA,CAAA,KAAA;AACA,WAAA,IAAA,CAAA,GAAA,GAAA,IAAA,CAAA,GAAA;AACA;AAbA;AAnCA,CAAA","sourcesContent":["<template>\n    <div v-if=\"user && token && token.isLogged\">\n        <b-jumbotron>\n            <template #header>Hi, {{user.username}}</template>\n            <template #lead>\n                <b>Biography</b><br>\n                {{user.bio}}\n            </template>\n            <hr class=\"my-4\">\n            <p>Email : {{user.email}}</p>\n            <hr class=\"my-4\">\n            <p>Here since : {{createdDate}}</p>\n            <b-button variant=\"primary\" @click=\"actionModal('show')\">Edit my profile</b-button>\n        </b-jumbotron>\n        <b-modal id=\"modal-form\" centered hide-footer title=\"Edit my profile\">\n            <profile-form \n                :email=\"email\"\n                :username=\"username\"\n                :bio=\"bio\"\n                :token=\"token.token\"\n                :cancel=\"actionModal\"\n                @saved=\"updateAfterSave\"\n            />\n        </b-modal>\n    </div>\n</template>\n\n<script>\nimport Cookies from 'js-cookie'\nimport jwt from 'jsonwebtoken'\nimport { mapGetters } from 'vuex'\nimport users from '../api/users'\nimport dayjs from 'dayjs'\nimport ProfileForm from '../molecules/ProfileForm'\n\n\nexport default {\n  components: { ProfileForm },\n    name: 'Profile',\n    data: function() {\n        return {\n            email: '',\n            username: '',\n            bio: ''\n        }\n    },\n    asyncComputed: {\n        ...mapGetters('users', {\n            token: 'token'\n        }),\n        async user () {\n            if (this.token && this.token.isLogged) {\n                const verifiedToken = jwt.verify(this.token.token, 'secret')\n                if (verifiedToken) {\n                    const user = await users.getUser(this.token.token)\n                    return user\n                }\n            }\n        },\n        createdDate: function() {\n            if (this.user) {\n                return dayjs(this.user.createdAt).locale('fr').format('D MMMM YYYY')\n            }\n        }\n    },\n    mounted() {\n        const logCookie = Cookies.get('token')\n        if (logCookie) {\n            this.$store.dispatch('users/STORE_TOKEN', logCookie)\n        }\n    },\n    methods: {\n        actionModal: function(action = 'hide') { // Display defaults user informations in form\n            this.username = this.user.username\n            this.email = this.user.email\n            this.bio = this.user.bio\n            if (action === 'show')  this.$bvModal.show('modal-form')\n            else this.$bvModal.hide('modal-form')\n        },\n        updateAfterSave: function(user) { // Update data for re-render\n            this.$bvModal.hide('modal-form')\n            this.user.username = user.username\n            this.user.email = user.email\n            this.user.bio = user.bio\n        }\n    }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/views"}]}